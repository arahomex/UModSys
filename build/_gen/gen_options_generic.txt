begin project-group umodsys
  set path-tmp $(path-root)/tmp
  set path-bin $(path-root)/bin

  set path-src $(path-root)/src
  set path-s-base $(path-src)/base
  set path-s-basesys $(path-src)/basesys
  set path-s-core $(path-src)/core
  set path-s-tl $(path-src)/tl
  set path-s-plugin $(path-src)/plugin

  option project-order umodsysc

  begin project all
    mode lib
    #
    depend umodsys_lib_core
    depend umodsys_lib_base
    depend umodsys_lib_basesys
    #
    depend umodsysc
    #
    depend plugin_test1
    depend plugin_test2
  end

  begin project umodsysc
    mode binary
    begin file-group src
      file $(path-s-basesys)/umodsys.c_main.cpp
    end
    depend umodsys_lib_core
    depend umodsys_lib_base
    depend umodsys_lib_basesys
  end

  begin project umodsys_lib_core
    mode lib
    begin file-group src
      file $(path-s-core)/umodsys.core.objects.cpp
      file $(path-s-core)/umodsys.core.stdtypedefs.cpp
      file $(path-s-core)/umodsys.core.uniqueptr.cpp
    end
    begin file-group src-tl
      file $(path-s-tl)/umodsys.tl.strings.cpp
    end
  end

  begin project umodsys_lib_basesys
    mode lib
    begin file-group src
      file $(path-s-basesys)/umodsys.basesys.rsystem.cpp
      file $(path-s-basesys)/umodsys.basesys.rsystem_main.cpp
      file $(path-s-basesys)/umodsys.basesys.rsystem_tests.cpp
      file $(path-s-basesys)/umodsys.basesys.rmodule.cpp
      file $(path-s-basesys)/umodsys.basesys.rmodulelib.cpp
      file $(path-s-basesys)/umodsys.basesys.rmoduleloader.cpp
      file $(path-s-basesys)/umodsys.basesys.rparameters.cpp
      file $(path-s-basesys)/umodsys.basesys.rconsole_std.cpp
    end
  end

  begin project umodsys_lib_base
    mode lib
    begin file-group src
      file $(path-s-base)/umodsys.base.debug.cpp
      file $(path-s-base)/umodsys.base.console.cpp
      file $(path-s-base)/umodsys.base.system.cpp
      file $(path-s-base)/umodsys.base.module.cpp
      file $(path-s-base)/umodsys.base.moduleloader.cpp
      file $(path-s-base)/umodsys.base.modulecontext.cpp
      file $(path-s-base)/umodsys.base.moduleinfo.cpp
      file $(path-s-base)/umodsys.base.modulereg.cpp
      file $(path-s-base)/umodsys.base.moduleregchain.cpp
    end
  end

  begin project plugin_test1
    mode shared
    begin file-group src
      file $(path-s-plugin)/test/plugin_test1.cpp
    end
    depend umodsys_lib_core
    depend umodsys_lib_base
  end

  begin project plugin_test2
    mode shared
    begin file-group src
      file $(path-s-plugin)/test/plugin_test2.cpp
    end
    depend umodsys_lib_core
    depend umodsys_lib_base
  end

end
